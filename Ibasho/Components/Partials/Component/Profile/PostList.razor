@*
    投稿一覧コンポーネント
*@

@* タブ *@
<div class="border-t border-gray-200">
    <TabSelect Tabs="@TabNames" ActiveTab="@ActiveTab" OnTabChanged="HandleTabChanged" />
</div>

@* 投稿一覧 *@
<div class="space-y-3 mt-4">
    @if (Posts == null || Posts.Count == 0)
    {
        <div class="text-gray-500 text-center py-8">投稿はまだありません</div>
    }
    else
    {
        <div class="space-y-4">
            @foreach (var post in Posts)
            {
                <PostItem Post="post" />
            }
        </div>
    }
</div>

@code {
    // 表示用ユーザId
    [Parameter] public string DisplayUserId { get; set; } = "";

    // 投稿一覧
    [Parameter] public IReadOnlyList<PostListItemDto>? Posts { get; set; } = [];

    // タブ変更時のコールバック
    [Parameter] public EventCallback<string> OnTabChanged { get; set; }

    // タブ名
    private List<string> TabNames = new() { "投稿", "いいね" };

    // アクティブタブ
    public string ActiveTab { get; set; } = "投稿";

    /// <summary>
    /// タブ変更時
    /// </summary>
    /// <param name="changedTab">変更後のタブ</param>
    private async Task HandleTabChanged(string changedTab)
    {
        ActiveTab = changedTab;
        await OnTabChanged.InvokeAsync(changedTab);
    }
}
